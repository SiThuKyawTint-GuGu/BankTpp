import{_ as E}from"./FeedCard.a94bcc17.js";import{a as l,A as V,m as M,w as S,r as d,o as i,c as v,e as c,d as n,f as b,t as p,u as o,p as T,b as q,F as D,h as G,i as z}from"./app.caeeee48.js";const j={__name:"PaginatedFeed",setup(L){const A=l([2,2,1,2,2,3,3,3,3,3,3]),F="articles";let m=l([]),e=l(1),r=l(0),f=l(0),y=l(0),k=l(0),x=l(null),_=l([]);const g=V(()=>Math.ceil(r.value/f.value));M(()=>{axios.post("/api/getarticles",{page:1}).then(t=>{t.status&&(m.value=t.data.articles,r.value=t.data.totalcount,f.value=t.data.limit,y.value=t.data.fromcount,k.value=t.data.tocount,x.value=t.data.firstkey,_[e.value]=t.data.lastkey)}).catch(t=>{console.log("Error - "+t)})}),S(e,t=>{window.scrollTo(0,0)});function $(){e.value--,h("prev")}function B(){e.value++,h("next")}function h(t){axios.post("/api/getarticles",{page:e.value,action:t,keyafter:_[e.value-1]}).then(a=>{a.status&&(m.value=a.data.articles,r.value=a.data.totalcount,f.value=a.data.limit,y.value=a.data.fromcount,k.value=a.data.tocount,x.value=a.data.firstkey,_[e.value]=a.data.lastkey)})}return(t,a)=>{const w=d("v-container"),u=d("v-col"),P=d("v-row"),C=d("v-btn");return i(),v(w,null,{default:c(()=>[n(w,{align:"center"},{default:c(()=>[b(" We have "+p(o(r))+" articles for you to discover. ",1)]),_:1}),n(P,null,{default:c(()=>[n(u,{cols:"12"},{default:c(()=>[T(t.$slots,"default")]),_:3}),(i(!0),q(D,null,G(o(m),(s,N)=>(i(),v(E,{key:s.title,currentindex:N+11*(o(e)-1),size:A.value[N],article:s,isprocesslist:F},null,8,["currentindex","size","article"]))),128))]),_:3}),n(P,{align:"center"},{default:c(()=>[n(u,{cols:"3"},{default:c(()=>[o(e)!==1?(i(),v(C,{key:0,color:"primary",size:"small",icon:"mdi-chevron-left",class:"ml-0",square:"",title:"Previous page",onClick:a[0]||(a[0]=s=>$())})):z("",!0)]),_:1}),n(u,{class:"text-center subheading",cols:"6"},{default:c(()=>[b(" PAGE "+p(o(e))+" OF "+p(o(g)),1)]),_:1}),n(u,{class:"text-right",cols:"3"},{default:c(()=>[o(g)>1&&o(e)<o(g)?(i(),v(C,{key:0,color:"primary",size:"small",icon:"mdi-chevron-right",class:"mr-0",title:"Next page",onClick:a[1]||(a[1]=s=>B())})):z("",!0)]),_:1})]),_:1})]),_:3})}}};export{j as _};
